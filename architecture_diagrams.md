# Fraud Detection System - Architecture Diagrams

## 1. Fraud Detection Localhost - System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            FRAUD DETECTION LOCALHOST                            │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐            │
│  │   Web Browser   │    │   Data Scientist │    │   API Client    │            │
│  │  (Dashboard)    │    │  (Jupyter Lab)   │    │ (External Apps) │            │
│  └─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘            │
│            │                      │                      │                    │
│            │ :8501               │ :8888                │ :8000              │
│            │                      │                      │                    │
├────────────┼──────────────────────┼──────────────────────┼────────────────────┤
│            │                      │                      │                    │
│  ┌─────────▼───────┐    ┌─────────▼───────┐    ┌─────────▼───────┐            │
│  │   Streamlit     │    │   Jupyter Lab   │    │   FastAPI       │            │
│  │   Dashboard     │    │   Notebooks     │    │   ML Service    │            │
│  │                 │    │                 │    │                 │            │
│  │ • Real-time     │    │ • Data Explore  │    │ • Prediction    │            │
│  │   Metrics       │    │ • Feature Eng   │    │ • Model Info    │            │
│  │ • Fraud Alerts  │    │ • Model Train   │    │ • Health Check  │            │
│  │ • Charts        │    │ • Evaluation    │    │ • Batch Predict │            │
│  └─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘            │
│            │                      │                      │                    │
│            │                      │                      │                    │
├────────────┼──────────────────────┼──────────────────────┼────────────────────┤
│            │                      │                      │                    │
│            │              ┌───────▼──────┐               │                    │
│            │              │    Models    │               │                    │
│            │              │              │               │                    │
│            │              │ • XGBoost    │               │                    │
│            │              │ • Encoders   │               │                    │
│            │              │ • Metadata   │               │                    │
│            │              └──────────────┘               │                    │
│            │                                             │                    │
│            │                                             │                    │
│  ┌─────────▼─────────────────────────────────────────────▼───────┐            │
│  │                    Data & Cache Layer                          │            │
│  │                                                                │            │
│  │  ┌─────────────────┐         ┌─────────────────┐              │            │
│  │  │   PostgreSQL    │         │     Redis       │              │            │
│  │  │   Database      │         │     Cache       │              │            │
│  │  │                 │         │                 │              │            │
│  │  │ • Predictions   │         │ • Session Data  │              │            │
│  │  │ • Metrics       │         │ • Temp Results  │              │            │
│  │  │ • Audit Logs    │         │ • Rate Limiting │              │            │
│  │  └─────────────────┘         └─────────────────┘              │            │
│  └────────────────────────────────────────────────────────────────┘            │
│                                                                                 │
├─────────────────────────────────────────────────────────────────────────────────┤
│                              Monitoring Layer                                   │
│                                                                                 │
│  ┌─────────────────┐         ┌─────────────────┐         ┌─────────────────┐  │
│  │   Prometheus    │         │     Grafana     │         │    Log Files    │  │
│  │   Metrics       │         │   Dashboards    │         │                 │  │
│  │                 │         │                 │         │ • api.log       │  │
│  │ • API Metrics   │         │ • System Health │         │ • training.log  │  │
│  │ • Model Perf    │         │ • Fraud Trends  │         │ • monitoring.log│  │
│  │ • System Stats  │         │ • Performance   │         │                 │  │
│  └─────────────────┘         └─────────────────┘         └─────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 2. Real-time Fraud Detection - Streaming Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                          REAL-TIME FRAUD DETECTION                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐            │
│  │   POS Systems   │    │   ATM Networks  │    │  Online Payment │            │
│  │                 │    │                 │    │    Gateways     │            │
│  └─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘            │
│            │                      │                      │                    │
│            │                      │                      │                    │
│            └──────────────────────┼──────────────────────┘                    │
│                                   │                                           │
├───────────────────────────────────┼───────────────────────────────────────────┤
│                                   │                                           │
│  ┌─────────────────────────────────▼─────────────────────────────────┐        │
│  │                    Transaction Producer                            │        │
│  │                                                                    │        │
│  │  ┌─────────────────┐         ┌─────────────────┐                  │        │
│  │  │  Data Generator │         │ Transaction     │                  │        │
│  │  │                 │         │ Producer        │                  │        │
│  │  │ • Synthetic     │         │                 │                  │        │
│  │  │   Transactions  │         │ • Kafka Client  │                  │        │
│  │  │ • Fraud Inject  │         │ • Serialization │                  │        │
│  │  └─────────────────┘         └─────────────────┘                  │        │
│  └─────────────────────────────────┬─────────────────────────────────┘        │
│                                    │                                          │
├────────────────────────────────────┼──────────────────────────────────────────┤
│                                    │                                          │
│  ┌─────────────────────────────────▼─────────────────────────────────┐        │
│  │                      Apache Kafka                                  │        │
│  │                                                                    │        │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐      │        │
│  │  │ raw-transactions│ │fraud-predictions│ │   fraud-alerts  │      │        │
│  │  │     Topic       │ │     Topic       │ │     Topic       │      │        │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘      │        │
│  └─────────────────────────────────┬─────────────────────────────────┘        │
│                                    │                                          │
├────────────────────────────────────┼──────────────────────────────────────────┤
│                                    │                                          │
│  ┌─────────────────────────────────▼─────────────────────────────────┐        │
│  │                    Apache Flink Processing                         │        │
│  │                                                                    │        │
│  │  ┌─────────────────┐         ┌─────────────────┐                  │        │
│  │  │ Feature         │         │ Fraud Detection │                  │        │
│  │  │ Engineering     │         │ Model           │                  │        │
│  │  │                 │         │                 │                  │        │
│  │  │ • Aggregations  │         │ • XGBoost       │                  │        │
│  │  │ • Enrichment    │         │ • Real-time     │                  │        │
│  │  │ • Validation    │         │   Scoring       │                  │        │
│  │  └─────────────────┘         └─────────────────┘                  │        │
│  └─────────────────────────────────┬─────────────────────────────────┘        │
│                                    │                                          │
├────────────────────────────────────┼──────────────────────────────────────────┤
│                                    │                                          │
│  ┌─────────────────────────────────▼─────────────────────────────────┐        │
│  │                       Storage & Serving Layer                      │        │
│  │                                                                    │        │
│  │ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐       │        │
│  │ │  Elasticsearch  │ │    Feature      │ │   MLflow        │       │        │
│  │ │                 │ │    Store        │ │                 │       │        │
│  │ │ • Search Index  │ │                 │ │ • Model Registry│       │        │
│  │ │ • Aggregations  │ │ • Historical    │ │ • Experiments   │       │        │
│  │ │ • Alerting      │ │   Features      │ │ • Versions      │       │        │
│  │ └─────────────────┘ └─────────────────┘ └─────────────────┘       │        │
│  └─────────────────────────────────┬─────────────────────────────────┘        │
│                                    │                                          │
├────────────────────────────────────┼──────────────────────────────────────────┤
│                                    │                                          │
│  ┌─────────────────────────────────▼─────────────────────────────────┐        │
│  │                          API & Dashboard Layer                     │        │
│  │                                                                    │        │
│  │ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐       │        │
│  │ │   Model API     │ │    React        │ │   MLOps         │       │        │
│  │ │                 │ │   Dashboard     │ │   Monitoring    │       │        │
│  │ │ • Predictions   │ │                 │ │                 │       │        │
│  │ │ • Model Info    │ │ • Real-time     │ │ • Data Drift    │       │        │
│  │ │ • Health Check  │ │   Alerts        │ │ • Model Drift   │       │        │
│  │ │                 │ │ • Analytics     │ │ • Performance   │       │        │
│  │ └─────────────────┘ └─────────────────┘ └─────────────────┘       │        │
│  └────────────────────────────────────────────────────────────────────┘        │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 3. ML Pipeline & Data Flow

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              ML PIPELINE DATA FLOW                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐ │
│  │                              DATA INGESTION                                 │ │
│  │                                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   Raw CSV   │  │ Transaction │  │  Historical │  │  External   │        │ │
│  │  │    Files    │  │   Streams   │  │    Data     │  │    APIs     │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────┬───────────────────────────────────────────────┘ │
│                                │                                                 │
│  ┌─────────────────────────────▼───────────────────────────────────────────────┐ │
│  │                           DATA PROCESSING                                   │ │
│  │                                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   Data      │  │   Feature   │  │   Data      │  │    Data     │        │ │
│  │  │ Validation  │  │ Engineering │  │ Cleaning    │  │ Enrichment  │        │ │
│  │  │             │  │             │  │             │  │             │        │ │
│  │  │ • Schema    │  │ • Temporal  │  │ • Outliers  │  │ • Geo Data  │        │ │
│  │  │ • Quality   │  │ • Spatial   │  │ • Missing   │  │ • Customer  │        │ │
│  │  │ • Anomaly   │  │ • Behavior  │  │ • Duplicates│  │   History   │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────┬───────────────────────────────────────────────┘ │
│                                │                                                 │
│  ┌─────────────────────────────▼───────────────────────────────────────────────┐ │
│  │                          FEATURE STORE                                      │ │
│  │                                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │  Customer   │  │ Transaction │  │  Merchant   │  │   Temporal  │        │ │
│  │  │  Features   │  │  Features   │  │  Features   │  │  Features   │        │ │
│  │  │             │  │             │  │             │  │             │        │ │
│  │  │ • Age       │  │ • Amount    │  │ • Category  │  │ • Hour      │        │ │
│  │  │ • History   │  │ • Distance  │  │ • Location  │  │ • Day/Week  │        │ │
│  │  │ • Behavior  │  │ • Frequency │  │ • Risk Score│  │ • Seasonality│       │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────┬───────────────────────────────────────────────┘ │
│                                │                                                 │
│  ┌─────────────────────────────▼───────────────────────────────────────────────┐ │
│  │                           MODEL TRAINING                                    │ │
│  │                                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   XGBoost   │  │ Random      │  │ Neural      │  │  Ensemble   │        │ │
│  │  │   Model     │  │ Forest      │  │ Network     │  │   Model     │        │ │
│  │  │             │  │             │  │             │  │             │        │ │
│  │  │ • Gradient  │  │ • Tree      │  │ • Deep      │  │ • Voting    │        │ │
│  │  │   Boosting  │  │   Ensemble  │  │   Learning  │  │ • Stacking  │        │ │
│  │  │ • Hyperopt  │  │ • Bagging   │  │ • Dropout   │  │ • Blending  │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────┬───────────────────────────────────────────────┘ │
│                                │                                                 │
│  ┌─────────────────────────────▼───────────────────────────────────────────────┐ │
│  │                         MODEL EVALUATION                                    │ │
│  │                                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   Metrics   │  │ Validation  │  │   Bias      │  │ Explainability│      │ │
│  │  │             │  │             │  │ Detection   │  │             │        │ │
│  │  │ • AUC-ROC   │  │ • K-Fold    │  │             │  │ • SHAP      │        │ │
│  │  │ • Precision │  │ • Time Split│  │ • Fairness  │  │ • LIME      │        │ │
│  │  │ • Recall    │  │ • Holdout   │  │ • Drift     │  │ • Feature   │        │ │
│  │  │ • F1-Score  │  │             │  │             │  │   Importance│        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────┬───────────────────────────────────────────────┘ │
│                                │                                                 │
│  ┌─────────────────────────────▼───────────────────────────────────────────────┐ │
│  │                        MODEL DEPLOYMENT                                     │ │
│  │                                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │  Model      │  │   A/B       │  │  Canary     │  │ Monitoring  │        │ │
│  │  │ Registry    │  │ Testing     │  │ Deployment  │  │ & Alerting  │        │ │
│  │  │             │  │             │  │             │  │             │        │ │
│  │  │ • Versioning│  │ • Traffic   │  │ • Gradual   │  │ • Performance│       │ │
│  │  │ • Metadata  │  │   Split     │  │   Rollout   │  │ • Drift     │        │ │
│  │  │ • Lineage   │  │ • Champion  │  │ • Rollback  │  │ • Alerts    │        │ │
│  │  │             │  │   Challenger│  │             │  │             │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────┬───────────────────────────────────────────────┘ │
│                                │                                                 │
│  ┌─────────────────────────────▼───────────────────────────────────────────────┐ │
│  │                        REAL-TIME SERVING                                   │ │
│  │                                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │ Prediction  │  │   Feature   │  │   Response  │  │   Feedback  │        │ │
│  │  │  Service    │  │  Serving    │  │   Caching   │  │    Loop     │        │ │
│  │  │             │  │             │  │             │  │             │        │ │
│  │  │ • Low       │  │ • Real-time │  │ • Redis     │  │ • Label     │        │ │
│  │  │   Latency   │  │ • Batch     │  │ • Response  │  │   Collection │       │ │
│  │  │ • High      │  │ • Streaming │  │   Time      │  │ • Retraining│        │ │
│  │  │   Throughput│  │             │  │             │  │   Trigger   │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 4. Deployment Architecture Options

### Option A: Single Server Deployment (Current)
```
┌──────────────────────┐
│     Single Server    │
│                      │
│  ┌────────────────┐  │
│  │    Docker      │  │
│  │   Compose      │  │
│  │                │  │
│  │ • ML API       │  │
│  │ • Dashboard    │  │
│  │ • Database     │  │
│  │ • Redis        │  │
│  │ • Jupyter      │  │
│  │ • Monitoring   │  │
│  └────────────────┘  │
└──────────────────────┘
```

### Option B: Kubernetes Deployment (Recommended)
```
┌─────────────────────────────────────────────────────────────┐
│                    Kubernetes Cluster                       │
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │   Ingress   │  │   Service   │  │   Config    │         │
│  │  Controller │  │    Mesh     │  │    Maps     │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                  Application Pods                       │ │
│  │                                                         │ │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐         │ │
│  │ │   ML API    │ │  Dashboard  │ │   Jupyter   │         │ │
│  │ │    Pods     │ │    Pods     │ │    Pods     │         │ │
│  │ └─────────────┘ └─────────────┘ └─────────────┘         │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                   Storage Layer                         │ │
│  │                                                         │ │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐         │ │
│  │ │ PostgreSQL  │ │    Redis    │ │  MinIO/S3   │         │ │
│  │ │ StatefulSet │ │ StatefulSet │ │   Storage   │         │ │
│  │ └─────────────┘ └─────────────┘ └─────────────┘         │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                  Monitoring Stack                       │ │
│  │                                                         │ │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐         │ │
│  │ │ Prometheus  │ │   Grafana   │ │ Jaeger/     │         │ │
│  │ │             │ │             │ │ OpenTelemetry│        │ │
│  │ └─────────────┘ └─────────────┘ └─────────────┘         │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```